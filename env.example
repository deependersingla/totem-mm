# =============================================================================
# totem-mm Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
#   cp env.example .env
# =============================================================================

# -----------------------------------------------------------------------------
# Betfair
# -----------------------------------------------------------------------------
# Application key (required for both polling and streaming)
BETFAIR_APP_KEY=

# For POLLING mode (fallback):
BETFAIR_SESSION_TOKEN=
# Default: https://api.betfair.com/exchange/betting/json-rpc/v1
BETFAIR_RPC_URL=

# For STREAMING mode (recommended for low latency):
# If both USERNAME and PASSWORD are set, streaming will be used automatically
BETFAIR_USERNAME=
BETFAIR_PASSWORD=
# SSL certs for Betfair cert-login (required for streaming). If both unset, app uses ./certs .
#
# What to put in certs/ (default): create a self-signed cert, upload .crt to Betfair, then put
#   - client-2048.crt  and  client-2048.key   (or any .crt + .key pair), OR
#   - a single  client-2048.pem  (cert + key concatenated)
# Full steps: see  docs/BETFAIR_CERTIFICATE_SETUP.md
#
# Override via env:
#   BETFAIR_CERTS=./certs   (directory with .crt and .key, or .pem)
#   BETFAIR_CERT_FILE=/path/to/client-identity.pem
BETFAIR_CERTS=
BETFAIR_CERT_FILE=

# Comma-separated list of Betfair market IDs to monitor
# Example: BETFAIR_MARKET_IDS=1.253401199,1.253318288,1.253606950
BETFAIR_MARKET_IDS=

# Seconds between session keep-alive calls (default: 1200 = 20 minutes)
# Only used in polling mode; streaming handles keep-alive automatically
BETFAIR_KEEP_ALIVE_INTERVAL=1200

# -----------------------------------------------------------------------------
# Polymarket (RFQ quoting)
# -----------------------------------------------------------------------------
# Polygon wallet address that holds USDC and trading funds (funder)
POLYMARKET_ADDRESS=

# Private key for signing (hex string, with or without 0x prefix)
POLYMARKET_PRIVATE_KEY=

# Signature type: 0=EOA, 1=POLY_PROXY (Magic Link), 2=GNOSIS_SAFE
POLYMARKET_SIGNATURE_TYPE=1

# -----------------------------------------------------------------------------
# Polymarket Real-Time Data Streaming (RTDS) WebSocket (optional)
# -----------------------------------------------------------------------------
# If true, use RTDS WebSocket for RFQ events; if false, use HTTP polling (get_pending_requests)
POLYMARKET_USE_STREAMING=false
# Used by connectors/polymarket/stream.py to subscribe to topics like "rfq"
POLYMARKET_RTDS_WS_URL=wss://ws-live-data.polymarket.com
POLYMARKET_RTDS_PING_INTERVAL_SECONDS=5
POLYMARKET_RTDS_RECONNECT_DELAY_SECONDS=5
# If true, log every raw websocket message (very noisy)
POLYMARKET_RTDS_LOG_RAW_MESSAGES=false

# -----------------------------------------------------------------------------
# Odds API (optional)
# -----------------------------------------------------------------------------
ODDSAPI_API_KEY=

# -----------------------------------------------------------------------------
# Token Map (Polymarket token_id -> Betfair selectionId)
# -----------------------------------------------------------------------------
# JSON mapping. Required for RFQ system. Leave empty {} to disable RFQ.
# Example: TOKEN_MAP='{"token_abc_yes": 12345, "token_abc_no": 12346}'
TOKEN_MAP={}

# -----------------------------------------------------------------------------
# RFQ System Tunables
# -----------------------------------------------------------------------------
# Seconds between polling Polymarket for new RFQ requests
RFQ_POLL_INTERVAL=5

# Seconds before an active quote is considered stale and cancelled
RFQ_QUOTE_TTL=300

# Bid-ask spread (e.g. 0.03 = 3%)
RFQ_SPREAD=0.03

# Max USDC notional per single quote
RFQ_MAX_QUOTE_SIZE_USDC=100

# Max total open USDC exposure across all active quotes
RFQ_MAX_EXPOSURE_USDC=1000

# -----------------------------------------------------------------------------
# RFQ Execution Safety Switches
# -----------------------------------------------------------------------------
# If true, do not submit quotes / do not approve orders (log only)
RFQ_DRY_RUN=true
# If true, approve accepted RFQ orders (can execute real trades)
RFQ_APPROVE_ORDERS=false
